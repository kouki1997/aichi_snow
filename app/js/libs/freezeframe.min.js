var freezeframe=function(o){var r=function(e){console.warn("✨ freezeframe.js ✨ : "+e)},c=function(){return 0<this.images.length},f=function(e,a){var t;if(null!=e&&1<a.length){if(0==(t=a.filter(o(e))).length)return r('no images found for selector "'+e+'"'),!1}else t=a;return t};function e(e){var a;if(this.options={selector:".freezeframe",animation_play_duration:5e3,non_touch_device_trigger_event:"hover",overlay:!1},a="string"==typeof e?{selector:e}:e)for(attribute in a)attribute in this.options?this.options[attribute]=a[attribute]:r(attribute+" not a valid option");this.is_touch_device="ontouchstart"in window||"onmsgesturechange"in window}return e.prototype.capture=function(e){var a;if(void 0!==e)a=e;else{if(void 0===this.options.selector)return r("no selector passed to capture function or set in options"),!1;a=this.options.selector}for(null==this.images&&(this.images=o()),this.images=this.images.add(o("img"+a)),i=0;i<this.images.length;i++)"gif"!==this.images[i].src.split(".").pop().toLowerCase().substring(0,3)&&this.images.splice(i,1);return 0==this.images.length?(r("no gifs found for selector '"+a+"'"),!1):this},e.prototype.setup=function(e){if(null!=e){var a=e.selector;e.overlay}var t=this,s=this.images.not(".ff-setup"),i=["ff-container","ff-loading-icon"];return c.call(t)?0==s.length?r("unable to run setup(), no images require setup"):(f.call(t,a,s).each(function(e){var a=o(this);a.addClass("ff-setup ff-image"),a.hasClass("freezeframe-responsive")&&i.push("ff-responsive"),$canvas=o("<canvas />",{class:"ff-canvas"}).attr({width:0,height:0}),a.add($canvas).wrapAll(o("<div />",{class:i.join(" ")})),t.options.overlay&&($overlay=o("<div />",{class:"ff-overlay"}).insertAfter(a)),$canvas.insertBefore(a)}),imagesLoaded(s).on("progress",function(e,a){(function(e){var a=e.siblings("canvas"),t="transitionend webkitTransitionEnd oTransitionEnd otransitionend",s=e[0].clientWidth,i=e[0].clientHeight;a.attr({width:s,height:i}),context=a[0].getContext("2d"),context.drawImage(e[0],0,0,s,i),a.addClass("ff-canvas-ready").on(t,function(){o(this).off(t),e.addClass("ff-image-ready"),e.parent().removeClass("ff-loading-icon")})}).call(t,o(a.img))})):r("unable to run setup(), no images captured"),this},e.prototype.attach=function(e){var n=this;return c.call(n)?f.call(n,e,n.images).each(function(e){var a,t=o(this),s=o(this).siblings("canvas"),i=o(this).siblings(".ff-overlay");(n.is_touch_device||"hover"!=n.options.non_touch_device_trigger_event||(t.on("mouseenter",function(){t.hasClass("ff-image-ready")&&(t.attr("src",t[0].src),s.removeClass("ff-canvas-ready").addClass("ff-canvas-active"),n.options.overlay&&i.addClass("ff-overlay-active"))}),t.on("mouseleave",function(){t.hasClass("ff-image-ready")&&(s.removeClass("ff-canvas-active").addClass("ff-canvas-ready"),n.options.overlay&&i.removeClass("ff-overlay-active"))})),!n.is_touch_device&&"click"==n.options.non_touch_device_trigger_event||n.is_touch_device)&&t.on("click",function(){var e=s.hasClass("ff-canvas-active");t.hasClass("ff-image-ready")&&(e?(n.options.animation_play_duration!=1/0&&clearTimeout(a),s.removeClass("ff-canvas-active").addClass("ff-canvas-ready"),n.options.overlay&&i.removeClass("ff-overlay-active")):(t.attr("src",t[0].src),s.removeClass("ff-canvas-ready").addClass("ff-canvas-active"),n.options.overlay&&i.addClass("ff-overlay-active"),n.options.animation_play_duration!=1/0&&(a=setTimeout(function(){s.removeClass("ff-canvas-active").addClass("ff-canvas-ready")},n.options.animation_play_duration))))})}):r("unable to run attach(), no images captured"),this},e.prototype.trigger=function(e){var a=0;return f.call(this,e,this.images).each(function(e){o(this).hasClass("ff-image-ready")?(o(this).attr("src",o(this)[0].src),o(this).siblings("canvas").removeClass("ff-canvas-ready").addClass("ff-canvas-active")):(r("image not done processing ! "+o(this).attr("src")),a++)}),0==a},e.prototype.release=function(e){var a=0;return f.call(this,e,this.images).each(function(e){o(this).hasClass("ff-image-ready")?o(this).siblings("canvas").removeClass("ff-canvas-active").addClass("ff-canvas-ready"):(r("image not done processing ! "+o(this).attr("src")),a++)}),0==a},e.prototype.freeze=function(){return this.capture().setup().attach(),this},e}($);$.fn.freezeframe=function(e){if(0==this.length)return console.warn("✨ freezeframe.js ✨ : no images found for selector "+this.selector),!1;var a=new freezeframe(e);a.images=this,a.setup().attach();var t=this;return["trigger","release"].forEach(function(e){t[e]=function(){return a[e](t.selector),t}}),this};